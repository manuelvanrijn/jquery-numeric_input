/*
 * jQuery Numeric Input - v0.2.2 - 2016-04-13
 * https://github.com/manuelvanrijn/jquery-numeric_input
 * Copyright (c) 2016 Manuel van Rijn
 * Licensed MIT, GPL
 */
(function(e,t,n,r){var i=function(t,n){this.elem=t,this.$elem=e(t),this.options=n};i.prototype={init:function(){var t=this;t.ctrlDown=!1,t.options=e.extend({},e.fn.numeric_input.defaults,t.options),t.$elem.keypress(function(e){t.preventDefaultForKeyCode(e.which)===!0&&e.preventDefault();var n=t.getNewValueForKeyCode(e.which,t.$elem.val(),this.selectionStart);n!==!1&&(t.$elem.val(n),t.options.callback.call(t,n))}),t.options.parseOnBlur===!0&&t.$elem.on("blur",function(e){var n=t.parseValue(t.$elem.val());t.$elem.val(n)}),t.options.clearInputOnBlurForZeroValue===!0&&t.$elem.on("focus",function(e){var n=t.$elem.val();n=n.replace(/[A-Za-z$]/g,""),n=n.replace("-",""),n=n.replace(t.options.decimal,"."),parseFloat(n)===0&&t.$elem.val("")}),t.$elem.on("input propertychange",function(){var e=t.parseValue(t.$elem.val());t.options.callback.call(t,e)});if(t.options.initialParse===!0){var r=t.parseValue(t.$elem.val());t.$elem.val(r)}var i=17,s=91;return e(n).keydown(function(e){if(e.keyCode===i||e.keyCode===s)t.ctrlDown=!0}).keyup(function(e){if(e.keyCode===i||e.keyCode===s)t.ctrlDown=!1}),t},preventDefaultForKeyCode:function(e){var t=97,n=120,r=99,i=118;if(this.ctrlDown&&e===t||this.ctrlDown&&e===n||this.ctrlDown&&e===r||this.ctrlDown&&e===i)return!1;if(e>=48&&e<=57)return!1;switch(e){case 0:case 8:case 9:case 35:case 36:case 37:case 39:case 144:return!1;default:return!0}},getNewValueForKeyCode:function(t,n,r){if(t===44||t===46||t===188||t===190)if(n.indexOf(this.options.decimal)===-1)return e.trim(n)===""&&this.options.leadingZeroCheck&&(n="0",r+=1),[n.slice(0,r),this.options.decimal,n.slice(r)].join("");return t===45&&this.options.allowNegative&&n.charAt(0)!=="-"?"-"+n:!1},parseValue:function(e){var t="||SEP||",n=!1,i=e.replace(/[^\d.,\-]/g,"");if(i.length===0&&this.options.allowEmpty)return"";i=i.replace(",",t).replace(".",t),i.indexOf("-")!==-1&&(i=i.replace("-",""),n=!0),i.indexOf(t)===0&&(i="0"+i),n===!0&&this.options.allowNegative===!0&&(i="-"+i);if(this.options.numberOfDecimals!==null){var s=i.split(t)[1];s!==r&&(s.length>this.options.numberOfDecimals&&(i=Number(Number(String("0."+s)).toFixed(this.options.numberOfDecimals))+Math.floor(Number(i.replace(t,".")))),s.length<this.options.numberOfDecimals&&(i+=(new Array(this.options.numberOfDecimals-s.length+1)).join("0")));var o=Number(String(i).replace(t,".")).toFixed(this.options.numberOfDecimals);i=String(o).replace(".",t)}return i.split(t).join(this.options.decimal)}},e.fn.numeric_input=function(t){return this.each(function(){e.data(this,"numeric_input")||e.data(this,"numeric_input",(new i(this,t)).init())})},e.fn.numeric_input.defaults={decimal:",",numberOfDecimals:null,leadingZeroCheck:!0,initialParse:!0,parseOnBlur:!0,clearInputOnBlurForZeroValue:!0,allowNegative:!1,allowEmpty:!1,callback:function(){}}})(jQuery,window,document);